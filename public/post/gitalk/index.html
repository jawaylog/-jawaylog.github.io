<!DOCTYPE html>
<html lang="zh-cn" prefix="og: http://ogp.me/ns#">

<head>
    <title>Gitalk评论系统Error: Network Error - 微影随行</title>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0,minimal-ui,shrink-to-fit=no">
<link rel="stylesheet" href="/css/archives.css">
<link rel="stylesheet" href="/css/friends.css">

<link rel="stylesheet" href="/scss/app.min.f0a5218bccb718c0c925c1761d5a68b0f71ccfd2cf7588215bbd0c0ea1dc3d8d.css" integrity="sha256-8KUhi8y3GMDJJcF2HVposPccz9LPdYghW70MDqHcPY0=" media="screen"> 

<link type="image/vnd.microsoft.icon" href="/images/favicon.ico" rel="shortcut icon">
<link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/lxgwwenkaiscreen.css" media="print" onload="this.media='all'">

<meta property="og:title" content="Gitalk评论系统Error: Network Error">
<meta property="og:url" content="https://xieha.cn/post/gitalk/">
<meta property="og:image" content="https://static.fatesinger.com/2024/01/p6krrw3jrw3hu7nd.jpeg">
<meta property="og:description" content="Gitalk评论系统Error: Network Error,Error: Validation Failed,hugo配置gitalk评论系统">
<meta property="og:type" content="article">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image:src" content="https://static.fatesinger.com/2024/01/p6krrw3jrw3hu7nd.jpeg">
<meta name="twitter:title" content="Gitalk评论系统Error: Network Error">
<meta name="twitter:description" content="Gitalk评论系统Error: Network Error,Error: Validation Failed,hugo配置gitalk评论系统">


</head>

<body>
    <script>
        window.DEFAULT_THEME = "";
        if (localStorage.getItem("theme") == null) {
            localStorage.setItem("theme", window.DEFAULT_THEME);
        }
        if (localStorage.getItem("theme") == "dark") {
            document.querySelector("body").classList.add("dark");
        }
        if (localStorage.getItem("theme") == "auto") {
            document.querySelector("body").classList.add("auto");
        }

    </script>
    <main class="layout">
        <div class="navbar">
            <div class="moblie--icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"
                    class="search--icon">
                    <path fill="currentColor" fill-rule="evenodd"
                        d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z"
                        clip-rule="evenodd"></path>
                </svg>
                <svg class="menu--icon" width="1em" height="1em" viewBox="0 0 24 14" fill="currentColor"
                    aria-hidden="true">
                    <line x1="24" y1="1" y2="1" stroke="currentColor" stroke-width="2"></line>
                    <line x1="24" y1="7" x2="4" y2="7" stroke="currentColor" stroke-width="2"></line>
                    <line x1="24" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"></line>
                </svg>
            </div>
            <div class="js-contentFixed">
                <div class="site--info">
                    <a href="https://xieha.cn/">
                        <img src="/images/avatar.jpeg" class="avatar" />
                    </a>
                    <div class="site--info__content">
                        <h1 class="site--title">微影随行</h1>
                        <div class="site--description"></div>
                    </div>
                </div>
                <nav class="site--nav">
	<ul class="widget--links">
		
		
		<li class="menu-item"><a href="/post/">微文章</a></li>
		
		
		
		<li class="menu-item"><a href="/page/welog/">微言语</a></li>
		
		
		
		<li class="menu-item"><a href="/page/rss/">朋友圈</a></li>
		
		
		
		<li class="menu-item"><a href="/page/friends/">伙伴们</a></li>
		
		
		
		<li class="menu-item"><a href="/page/about/">关于我</a></li>
		
		
	</ul>
</nav>
                <div class="site--footer__sns">
                    




                </div>
            </div>
        </div>
        <div class="content">
            <div class="search--area">
                <form role="search" method="get" class="search-form" action="/search">
                    <label class="search-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="currentColor" fill-rule="evenodd"
                                d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <input type="search" class="search-field" placeholder="Search …" value="" name="s"
                            id="searchbox" autocomplete="off">
                    </label>
                    <input type="submit" class="search-submit" value="Search">
                </form>
            </div>
            
<div class="articleContainer">
    <div class="article" data-id="416b73a6080897e4d8a84a94a6d65f3d">
        <header class="article--header">
            <h2 class="article--headline">Gitalk评论系统Error: Network Error</h2>
            
            <div class="article--subline">
                Gitalk评论系统Error: Network Error,Error: Validation Failed,hugo配置gitalk评论系统
            </div>
            
            <div class="article--meta">
                <time datetime='2022-11-26 15:22:11' class="humane--time">2022-11-26 15:22:11</time>
                
                <span class="sep"></span>
                
                <a href="/categories/%E6%8A%98%E8%85%BE%E5%90%A7/">折腾吧</a>
                
                
                
            </div>
        </header>
        <details class="toc">
            <summary class="toc-title">目录</summary>
            <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#一未找到相关的issues进行评论请联系xxx进行创建">一、未找到相关的Issues进行评论，请联系XXX进行创建</a></li>
        <li><a href="#二gitalk评论系统出现-error-network-erro">二、Gitalk评论系统出现 Error: Network Erro</a></li>
        <li><a href="#三gitalk评论系统出现-error-validation-failed">三、Gitalk评论系统出现 Error: Validation Failed</a></li>
        <li><a href="#11-cors-server项目">1.1 cors-server项目</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </details>
        <div class="article--body grap">
            <p>收集gitalk评论系统出现的一些问题</p>
<ul>
<li><strong>Gitalk评论系统出现 Error: Network Erro</strong></li>
<li><strong>Gitalk评论系统出现 Error: Validation Failed</strong></li>
<li><strong>未找到相关的Issues进行评论，请联系XXX进行创建</strong></li>
</ul>
<p>本站采用的是评论系统是Giscus，之所以要用gitalk，是觉得它的UI挺不错的，一直都想弄个微言的页面，发现这挺适合的。</p>
<p>本来觉得嵌入gitalk应该很容易的，谁知道这货是坑完又坑呀，搜寻了许多方法，什么md5呀，改变其他的ID呀，一堆的解决方案，自己愣是没搞明白。参考这么多方案，记录下自己的方法，仅供参考。</p>
<p>我这里采用的博客程序是hugo系统+Github+NEtlify部署方案。</p>
<h3 id="一未找到相关的issues进行评论请联系xxx进行创建">一、未找到相关的Issues进行评论，请联系XXX进行创建</h3>
<p>看下Homepage URL和Authorization callback URL，是否填写正确，这两个是否加上一样的<strong>https://</strong></p>
<p>查找地址：登录github，点击头像的Settings ，最下面的Developer settings ，找到对应的OAuth Apps。</p>
<p>还有检查下gitalk配置文件是否正确。</p>
<p>
<img src="F:%5cblog-koobai%5cstatic%5cimg%5c1.png" alt=""  />
</p>
<h3 id="二gitalk评论系统出现-error-network-erro">二、Gitalk评论系统出现 Error: Network Erro</h3>
<p>
<figure class="grap--figure">
    <img src="2.png" alt="2"  />
    <figcaption class="imageCaption">2</figcaption>
</figure>
</p>
<p>这个错误蛮复杂的，F12查看，是由于https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token这个链接失效。换个代理链接就好了。</p>
<p>那去哪里弄代理链接呢？
首先去Github ,Forked一个项目：<strong>


<a href="https://github.com/jawaylog/cors-server"  target="_blank" rel="noopener" >cors-server</a>
</strong>,部署在Netlify。</p>
<p>路径是：登录Netlify，可以用github账号授权登录，新建项目（add new site&gt;Import an existing project），选择github授权登录，之后再选择刚才Fored的项目**


<a href="https://github.com/jawaylog/cors-server"  target="_blank" rel="noopener" >cors-server</a>
**。然后Deploy site。</p>
<p>成功了话会有个子域名地址，比如 ：


<a href="https://xx.xx.netlify.app/"  target="_blank" rel="noopener" >https://xx.xx.netlify.app</a>
</p>
<p>这就是代理地址了。如果你的主题程序自带程序gitalk评论系统的，就把Proxy地址换成这个代理地址就行了。</p>
<p>例如这样：proxy = &ldquo;


<a href="https://xx.xx.netlify.app/github_access_token%22"  target="_blank" rel="noopener" >https://xx.xx.netlify.app/github_access_token"</a>
</p>
<p>xx.xx是你的子域名。</p>
<p>那像我这种没有Gitalk评论系统程序的，又该怎样呢。</p>
<p>前面说了，我用的程序是hugo，没有带gitalk评论系统，所以需要嵌入个。</p>
<p>首先在你主题文件夹（themes\xxx\layouts\partials），partials文件下新建个gitalk.html，放入如下代码：</p>
<pre tabindex="0"><code>&lt;html&gt;
&lt;head&gt;
{{ if .Site.Params.enableGitalk }}
&lt;div id=&#34;gitalk-container&#34;&gt;&lt;/div&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css&#34;&gt;
&lt;script src=&#34;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js&#34;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script&gt;
  const gitalk = new Gitalk({
     id: &#39;location.pathname&#39;,
    clientID: &#39;{{ .Site.Params.Gitalk.clientID }}&#39;, 
    clientSecret: &#39;{{ .Site.Params.Gitalk.clientSecret }}&#39;,
    repo: &#39;{{ .Site.Params.Gitalk.repo }}&#39;,
    owner: &#39;{{ .Site.Params.Gitalk.owner }}&#39;,
    admin: [&#39;{{ .Site.Params.Gitalk.owner }}&#39;],
    proxy: &#39;{{ .Site.Params.Gitalk.proxy }}&#39;, 
    title: &#39;{{ .Site.Params.Gitalk.title }}&#39;,
    distractionFreeMode: false // Facebook-like distraction free mode  
     
     });     
  (function() {
    if ([&#34;localhost&#34;, &#34;127.0.0.1&#34;].indexOf(window.location.hostname) != -1) {
      document.getElementById(&#39;gitalk-container&#39;).innerHTML = &#39;Gitalk comments not available by default when the website is previewed locally.&#39;;
      return;
    }
    gitalk.render(&#39;gitalk-container&#39;);
  })();
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>然后在single.html页面，找到这个 {{ partial &ldquo;comments.html&rdquo; . }}，在下面加入 {{ partial &ldquo;gitalk.html&rdquo; . }}</p>
<p>因为我用gitalk评论系统是用来做微言页面。所以我的就加在我的微言页面了。
但如果你的系统自带gitalk，就不需要额外添加了，又或者可以在comments.html页面里面直接加入我上面的gitalk代码就可以了。
然后在你的配置文件config.toml加入这段代码</p>
<pre tabindex="0"><code>[Params]
  enableGitalk = true

[Params.Gitalk]
    clientID = &#34;9fdd81a0137ba23&#34; # 上面申请OAuth Apps项目里的 ID
    clientSecret = &#34;2b0d69b9cee2c69d54cc8&#34; # 上面申请OAuth Apps项目里的密钥
    repo = &#34;gitalk&#34; # 项目仓库名字
    owner = &#34;jawaylog&#34; # github账号名字
    admin = &#34;jawaylog&#34; # Github库所有者和合作者，也可以像我的一样
    id= &#34;location.pathname&#34; 
    labels= &#34;gitalk&#34; #
    perPage= 15  
    pagerDirection= &#34;last&#34; 
    createIssueManually= false 
    distractionFreeMode= false 
    proxy = &#34;https://xx.xx.netlify.app/github_access_token&#34; //这里填写你的代理地址
    title = &#34;RulatedayDnd5eWiki-Comment&#34;
</code></pre><h3 id="三gitalk评论系统出现-error-validation-failed">三、Gitalk评论系统出现 Error: Validation Failed</h3>
<p>
<figure class="grap--figure">
    <img src="3.png" alt="3"  />
    <figcaption class="imageCaption">3</figcaption>
</figure>
</p>
<p>这个问题是我嵌入Gitalk评论，部署上去之后出现了。真的是一个坑填完又来一个坑。这是由于labels的50个字符长度限制问题，不能超过50个字符。</p>
<p>在gitalk.html里，加入这个就可以解决了。</p>
<pre tabindex="0"><code>title: &#39;{{ .Site.Params.Gitalk.title }}&#39;,
</code></pre><p>具体实现代码在上个问题里。</p>
<p>
<img src="4.png" alt=""  />
</p>
<p>本文参看部分文章如下：</p>
<p>


<a href="https://prohibitorum.top/7cc2c97a15b4.html"  target="_blank" rel="noopener" >解决 Gitalk 无法获取 Github Token 问题 </a>
</p>
<p>


<a href="https://github.com/Dedicatus546/cors-server"  target="_blank" rel="noopener" >Dedicatus546/cors-server项目 </a>
</p>
<h3 id="11-cors-server项目">1.1 cors-server项目</h3>
<p>最近发现cors-server项目 部署失败</p>
<pre tabindex="0"><code> 警告https://registry.nlark.com/setprototypeof/download/setprototypeof-1.2.0.tgz错误
</code></pre><p>
<img src="6.png" alt=""  />

发现是这个地址是访问不了，在项目里面更改地址了就可以了</p>
<pre tabindex="0"><code>将pnpm-lock.yaml里面的https://registry.nlark.com全部更改为https://registry.npmmirror.com
</code></pre><p>
<img src="7.png" alt=""  />
</p>
<p>如有问题，欢迎留言更正。</p>
<p>更新于2024.07.02</p>

        </div>
        
        <div class="post--single__action">
            <button class="button--like like-btn" aria-label="like the post">
                <svg class="icon--active" viewBox="0 0 1024 1024" width="32" height="32">
                    <path
                        d="M780.8 204.8c-83.2-44.8-179.2-19.2-243.2 44.8L512 275.2 486.4 249.6c-64-64-166.4-83.2-243.2-44.8C108.8 275.2 89.6 441.6 185.6 537.6l32 32 153.6 153.6 102.4 102.4c25.6 25.6 57.6 25.6 83.2 0l102.4-102.4 153.6-153.6 32-32C934.4 441.6 915.2 275.2 780.8 204.8z">
                    </path>
                </svg>
                <svg class="icon--default" viewBox="0 0 1024 1024" width="32" height="32">
                    <path
                        d="M332.8 249.6c38.4 0 83.2 19.2 108.8 44.8L467.2 320 512 364.8 556.8 320l25.6-25.6c32-32 70.4-44.8 108.8-44.8 19.2 0 38.4 6.4 57.6 12.8 44.8 25.6 70.4 57.6 76.8 108.8 6.4 44.8-6.4 89.6-38.4 121.6L512 774.4 236.8 492.8C204.8 460.8 185.6 416 192 371.2c6.4-44.8 38.4-83.2 76.8-108.8C288 256 313.6 249.6 332.8 249.6L332.8 249.6M332.8 185.6C300.8 185.6 268.8 192 243.2 204.8 108.8 275.2 89.6 441.6 185.6 537.6l281.6 281.6C480 832 499.2 838.4 512 838.4s32-6.4 38.4-19.2l281.6-281.6c96-96 76.8-262.4-57.6-332.8-25.6-12.8-57.6-19.2-89.6-19.2-57.6 0-115.2 25.6-153.6 64L512 275.2 486.4 249.6C448 211.2 390.4 185.6 332.8 185.6L332.8 185.6z">
                    </path>
                </svg>
                <span class="count"></span>
            </button>
        </div>
        
        <div class="article--tags u-paddingTop20">
            
            <a href="/tags/gitalk/" class="artile--tag"><span>#</span>Gitalk</a>
            
            <a href="/tags/hugo/" class="artile--tag"><span>#</span>Hugo</a>
            
        </div>
        
        
        

        
    </div>


    
<input type="checkbox" id="comments-toggle" class="comments-toggle" />


<label for="comments-toggle" class="comments-button">评论一下...</label>


<div id="comments" class="comments-hidden"><link href="https://a.xieha.cn/dist/Artalk.css" rel="stylesheet" />
<script src="https://a.xieha.cn/dist/Artalk.js"></script>


<div id="Comments"></div>

<script>
  Artalk.init({
    el: '#Comments',
    pageKey: 'https:\/\/xieha.cn\/post\/gitalk\/',
    pageTitle: 'Gitalk评论系统Error: Network Error',
    server: 'https:\/\/a.xieha.cn\/',
    site: '微影随行',
    
  })
</script></div>   
</div>

            <footer class="site--footer u-textAligncenter">
    <div>
        ©2018-2025.微影随行💗Xieha.cn
        .<a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2024299131号</a>
        <a href="https://fatesinger.com/74850 " target="_blank">bigfa</a>
        
        
        
</footer>
<aside class="sidebar">
    <button class="theme-toggle-button" aria-label="切换主题模式">
        <span class="theme-toggle-icon sun">
            
            <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color: currentcolor; width: 16px; height: 16px;">
                <circle cx="12" cy="12" r="5"></circle>
                <path d="M12 1v2"></path>
                <path d="M12 21v2"></path>
                <path d="M4.22 4.22l1.42 1.42"></path>
                <path d="M18.36 18.36l1.42 1.42"></path>
                <path d="M1 12h2"></path>
                <path d="M21 12h2"></path>
                <path d="M4.22 19.78l1.42-1.42"></path>
                <path d="M18.36 5.64l1.42-1.42"></path>
            </svg>
        </span>
        <span class="theme-toggle-icon moon">
            
            <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color: currentcolor; width: 16px; height: 16px;">
                <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
            </svg>
        </span>
    </button>
</aside>
<div class="backToTop">
    <svg xmlns="http://www.w3.org/2000/svg" class="svgIcon" viewBox="0 0 14 14" fill="currentColor" aria-hidden="true">
        <path
            d="M7.50015 0.425011C7.42998 0.354396 7.34632 0.298622 7.25415 0.261011C7.07101 0.187003 6.86629 0.187003 6.68315 0.261011C6.59128 0.298643 6.50795 0.354423 6.43815 0.425011L0.728147 6.13201C0.595667 6.27419 0.523544 6.46223 0.526972 6.65653C0.530401 6.85084 0.609113 7.03622 0.746526 7.17363C0.883939 7.31105 1.06932 7.38976 1.26362 7.39319C1.45793 7.39661 1.64597 7.32449 1.78815 7.19201L6.21615 2.76501V13.024C6.21615 13.2229 6.29517 13.4137 6.43582 13.5543C6.57647 13.695 6.76724 13.774 6.96615 13.774C7.16506 13.774 7.35583 13.695 7.49648 13.5543C7.63713 13.4137 7.71615 13.2229 7.71615 13.024V2.76501L12.1441 7.19201C12.2868 7.32867 12.4766 7.40497 12.6741 7.40497C12.8717 7.40497 13.0615 7.32867 13.2041 7.19201C13.3444 7.05126 13.4231 6.86068 13.4231 6.66201C13.4231 6.46334 13.3444 6.27277 13.2041 6.13201L7.50015 0.425011Z">
        </path>
    </svg>
</div>

<script type="text/javascript">
    window.WPD_TOKEN = "";
    window.commentDomain = "";
    window.actionDomain = "https:\/\/cf.xieha.cn\/";
    window.viewText = ' 次浏览';
    window.dbAPIBase = "";
    window.noComment = '还没有评论';
    window.zoom = "";
</script>
<script type="text/javascript">
    window.timeFormat = {
        second: '秒前',
        seconds: '秒前',
        minute: '',
        minutes: '',
        hour: '小时前',
        hours: '小时前',
        day: '天前',
        days: '天前',
        month: '月前',
        months: '月前',
    }
</script>
<script type="text/javascript" src="/ts/bundle.js" defer></script>

        </div>
    </main>
</body>

</html>